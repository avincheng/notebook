# 浏览器跨域问题汇总

## 浏览器的同源策略

如果两个 URL 的 protocol（协议）、host（主机）、port（端口）三部分完全相同，则这两个 URL 是同源。

同源策略（SOP，Same-Origin Policy）用于限制一个源（origin）的文档或者脚本与另一个源的资源文件的交互行为，可减少可能被 XSS 和 CSRF 攻击的媒介。

> URL 的 host 部分指 domain（域名，包含主域和子域）或者 IP，不包含路径，不同域名即使最终指向同一 IP 依然不是同源。
>
> XSS：Cross-Site Scripting，跨站脚本。
>
> CSRF：Cross-Site Request Forgery，跨站请求伪造。

同源策略会有以下限制行为：

* Cookie（可跨子域）、LocalStorage 和 IndexDB 无法跨域访问。
* iframe 内外无法跨域访问 DOM，Window 和 Location 对象的访问被添加限制。
* 通过 `window.onerror` 可以捕捉到 script 标签引用的跨域脚本中的错误，但是无法捕获具体错误信息。
* 跨域的 XHR 的 Response 默认会被浏览器拦截

## 参考文献

* [浏览器的同源策略](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)



